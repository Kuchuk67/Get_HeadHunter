# Get_HeadHunter
* запуск проекта get_headhunter\main.py

Работа с вакансиями загруженными с HeadHunter по API
Создание списка вакансий. Сортировка по дате и зарплате.
Итерирование списка. Удаление ненужных вакансий.
Сохрание и чтение файла со списком в формате JSON

## Структура проекта

### модуль get_headhunter
Модуль пользовательской оболочки для работы с программой
### модуль src
Классы работы  с данными
### модуль tests
Тесты классов
### каталог data
Каталог хранения данных пользователя и кодов регионов
### файл config.py
[Дополнительные настройки](#config) программы и API запросов 

## Содержание

* [class Vacancies()](#Vacancies) vacancies.py
* [class IterVacancies](#IterVacancies) vacancies.py
* [class Vacancy](#Vacancy) vacancy.py
* [class CompareVacancies](#CompareVacancies) vacancy.py
* [class GetAPI(ABC)](#GetAPI) get_api.py
* [class ListVacansies(GetAPI)](#ListVacansies) list_vacancies.py
* [class Files_Vacancies(ABC)](#Files_Vacancies)  file_vacancies.py
* [class FilesJSON(Files_Vacancies)](#FilesJSON)  file_json.py
* [class Area](#Area)  area.py

## Описание классов

# Vacancies
Формирует из данных полученных по API  список с объектами вакансий,
добавляет объекты, сортирует список, удаляет объекты из списка.

```x =   Vacancies()```

### метод vacancies
Возвращает список экземпляров вакансия Vacancу
Добавляет в список экземпляров вакансию Vacancу

```lists = x.vacancies```

Удаляет все вакансии
```del x.vacancies```

### метод  vacancy_del
Удаляет одну вакансию. Принимает id вакансии

```x.vacancy_del(123213)```

### метод  created
Отдает список объектов с вакансиями

```x.created(vacansies_data)```

### метод  sort_date
Сортирует список вакансий по дате 

```x.data.sort_date()```

### метод sort_salary
Сортирует список вакансий по зарплате

```x.sort_salary()```

---

# IterVacancies
Возвращает следующее объект Вакансию Vacancy.
Returns: int: Следующая вакансии.
Raises: StopIteration: Если достигнута верхняя граница диапазона.

```
f = IterVacancies(x.vacancies)
    while True:
        print(next(f)) 
>>> Бухгалтер, зарплата: 85250, Полный день, адрес: Хабаровск
```
        

---

# Vacancy
Позволяет создать объект, который содержит данные по одной конкретной вакансии


атрибуты — приватные:
- id вакансии
- название вакансии
- зарплата от
- зарплата до
- валюта зарплаты
- url
- дата
- словарь пользовательский данных
  * адрес офиса
  * краткое описание или требования
  * график работы

средняя по вилке зарплаты - высчитывается CompareVacancies.average

### staticmethod метод valid(data)
Проверка на положительные целые числа
при отрицательных возвращает ноль

### метод  id_v
возвращает id вакансии
### метод name
возвращает имя вакансии
### метод salary_from
возвращает зарплату 'от' вакансии
### метод salary_to
возвращает зарплату 'до' вакансии
### метод salary_average
возвращает среднюю зарплату вакансии
### метод currency
возвращает валюту зарплаты  вакансии
### метод url
возвращает урл вакансии
### метод additionally
возвращает словарь пользовательских данных вакансии
### метод date
возвращает дату вакансии

# CompareVacancies
Класс создает функцию сравнения вакансий по зарплате
на вход принимает зкземпляр вакансии 
Возвращает TRUE если проверяемая вакансия больше по зарплате

### метод average
статический метод подсчета средней зарплаты по вилке зарплат


# GetAPI
отправляет запрос для получения данных API
создаст объект: список словарей с данными

### метод area
параметр area для API запроса
area
изменение параметра area для API запроса

### метод salary
параметр salary для API запроса
salary
изменение параметра salary для API запроса

### abstractmethod to_dict

### метод connect
делает API запрас, 
сохраняет статус-код запроса.
если статус 200 возвращает словарь с JSON данными

### метод  data
метод выводит полученные по API вакансии

---
# ListVacansies
### метод  to_dict
Формирует из данных полученных по API  список словарей 
Выбирает только нужные поля данных вакансий
Если данные отсутствуют заменяет их нулями или пробелами

---
# Files_Vacancies
абстрактный класс работы  с файлами
Принимает имя файла
Определяет путь и имя файла
### метод  file_name
Возвращает абсолютный путь к файлу 

---

# FilesJSON
класс работы  с файлами JSON
принимает имя файла без расширения
Возвращает список словарей с вакансиями

### метод data_json_created
принимает списка объектов Vacansy
Создает из списка объектов Vacansy список словарей для JSON файла
Если есть файл загружает вакансии
Добавляет к ним новый список
Одинаковые вакансии не добавляются

### метод  save
Добавляет вакансии в файл *.json
Возвращает Ок или ошибку

### метод read
Читает вакансии из файла 
Возвращает список словарей с вакансиями
или пустой список при ошибке

### метод remove
Удаляет файл *.json

--- 
# Area
Класс определения id региона area.json
При инициализации если нет файла с регионами
вызывает метод load и метод save_to_file

### метод load
загружает регионы и создает файл area.json

### метод save_to_file
Сохраняет файл регионов

### метод id_area
определение id региона
Принимает str название субъекта или города
Возвращает кортеж (статус(Ok), id, наименование объекта)



# config
Файл настроек config.py
API запросы

* Количество ваканий на загружаемой странице

```PER_PAGE = 100```

* Количество загружаемых страниц

```PAGE = 5```

* Регион поиска по умолчанию

```AREA = '113'```

* Файл для сохранения данных по умолчинию

```FILE_NAME = 'data'```











# class GetAPI(ABC) 
#### abc_get_api.py
абстрактный класс для работы с API сервиса с вакансиями.
создаст объект: список словарей с данными
атрибуты:
- status: ответ сервера 200 - OK
- vacancies_data:  список словарей с вакансиями
- vacancies(приватный):  список элементов класса Vacancy  

### load_vacancies
метод получения данных -  отправляет запрос на API hh.ru для получения данных о вакансиях по ключевому слову.
Добавляет полученные данные к существующим. 
Для нового запроса предварительно воспользуйтесь делитером.
принимает: параметр — ключевое слово для поиска вакансий.
вернуть: собирает данные ответа в формате списка словарей из ключа item статус-код ответа.

### vacancies_data
возвращает приватный атрибут vacancies - полученные по API вакансии 

### делиттер vacancies_data
Удаляет загруженные вакансии 




# class ListVacancies(GetAPI) 
#### list_vacancies.py
Формирует из данных полученных по API  список с объектами вакансий, 
добавляет объекты, сортирует список, удаляет объекты из списка

### vacancies
метод который возвращает список с объектами вакансии
список создается на основе метода vacancies_data родительского класса.
Если в атрибуте vacancies список отсутствует, он создается автоматически
на основе метода vacancies_data родительского класса

### сеттер vacancies
Добавляет указанную вакансию в список

### делитер vacancies  
удалеет список вакансий.
ВНИМАНИЕ! При следующем запуске метода vacancies новый список создается автоматически
из данных, которые были полученны по API.

### sort_date
Сортирует список вакансий по дате

### sort_salary
Сортирует список вакансий по зарплате

# class Vacancy
#### vacancy.py



###  staticmethod average
имея вилку зарплат находит среднюю зарплату

### compare_vacancies
метод сравнения вакансий между собой по средней в вилке зарплаты
a.compare_vacancies(b)
True - если зарплата объекта 'a' больше чем 'y'



# class Save_Vacancies(ABC)
#### abc_save.py
абстрактный класс для работы с файлами.
Иcпользуется для создания классов обслуживающих ввод-вывод в разные типы файлов
Создает папку data для хранения файлов

атрибут:
- имя файла

### метод file_name
Возвращает абсолютный путь к файлу

### remove
Удаляет файл

# class SaveJSON(Save_Vacancies)
#### save_json.py
класс для работы с файлами JSON

### save 
Добавляет вакансии в файл из списка vacancies
### read
Читает вакансии из файла и записывает в список vacancies




2. vacancies.py
# class Vacancies(SaveJSON, ListVacancies)
Класс  подключатся к API и получать вакансии, читать вакансии из файла и сохранять их в файл














4. абстрактный класс, который обязывает реализовать методы для добавления вакансий в файл, получения данных из файла по указанным критериям и удаления информации о вакансиях.


5. Создать класс для сохранения информации о вакансиях в JSON-файл.

6.* реализовать классы для работы с другими форматами, например с CSV- или Excel-файлом, с TXT-файлом.

7.Создать функцию для взаимодействия с пользователем.
 Возможности этой функции должны быть следующими:
ввести поисковый запрос для запроса вакансий из hh.ru;
получить топ N вакансий по зарплате (N запрашивать у пользователя);
получить вакансии с ключевым словом в описании.
